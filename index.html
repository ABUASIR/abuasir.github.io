<!DOCTYPE html>  
<html lang="ar" dir="rtl">  
<head>  
  <meta charset="utf-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1" />  
  <title>ØªØ®Ø·ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø±Ø¹Ø©</title>  
  
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">  
  
  <style>  
    :root{  
      --bg:#0d0f13;  
      --card:#15171b;  
      --text:#e9edf3;  
      --muted:#9aa3b2;  
      --line:#2a2f39;  
      --accent:#22d3ee;  
      --danger:#ff3b3b;  
    }  
  
    body{  
      margin:0;  
      background:var(--bg);  
      color:var(--text);  
      font-family:"Tajawal",sans-serif;  
      text-align:center;  
      display:flex;  
      flex-direction:column;  
      align-items:center;  
      padding:20px;  
    }  
  
    h1{  
      font-weight:800;  
      margin-bottom:10px;  
      color:var(--accent);  
      text-shadow:0 0 10px rgba(34,211,238,0.3);
    }  
  
    .panel{  
      background:var(--card);  
      border:1px solid var(--line);  
      padding:22px;  
      width:min(450px,92vw);  
      border-radius:18px;  
      box-shadow:0 0 25px rgba(0,0,0,.4);  
    }  
  
    #toggleBtn{  
      background:#0f131a;  
      border:1px solid var(--danger);  
      color:var(--danger);  
      padding:14px;  
      font-size:1.2rem;  
      border-radius:12px;  
      cursor:pointer;  
      width:100%;  
      transition:.25s;  
      font-weight:700;
      text-shadow:0 0 4px var(--danger);
      box-shadow:0 0 15px rgba(255,0,0,0.35);  
    }  
    #toggleBtn.active{  
      border-color:var(--accent);  
      color:var(--accent);  
      box-shadow:0 0 15px var(--accent);  
      text-shadow:0 0 4px var(--accent);
    }  
  
    .circle{  
      width:115px;  
      height:115px;  
      border-radius:50%;  
      display:flex;  
      align-items:center;  
      justify-content:center;  
      font-size:2rem;  
      font-weight:bold;  
      border:6px solid var(--line);  
      margin:22px auto;  
      background:radial-gradient(circle at center,rgba(34,211,238,.15),rgba(0,0,0,0));  
      box-shadow:0 0 20px rgba(34,211,238,0.15);  
    }  
  
    footer{  
      margin-top:22px;  
      font-size:.95rem;  
      color:var(--muted);
      opacity:0.8;
    }  
  </style>  
</head>  
  
<body>  
  
  <h1>ØªØ®Ø·ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø±Ø¹Ø©</h1>  
  
  <div class="panel">  
  
    <button id="toggleBtn">ØªØ´ØºÙŠÙ„</button>  
  
    <div class="circle" id="circleTimer">5</div>  
  
  </div>
  
<script>  
/* Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª */  
const urls = [  
  "https://speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://jed-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://riyadh-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://dammam-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://baha-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://abha-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://taif-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://makkah-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://bahrah-speedtest.saudi.net.sa:8080/speedtest/upload.php",  
  "https://khamismushait-speedtest.saudi.net.sa:8080/speedtest/upload.php"  
];  
  
const intervalSec = 5;  
  
let running = false;  
let worker = null;  
let timer = null;  
  
const toggleBtn = document.getElementById("toggleBtn");  
const circle = document.getElementById("circleTimer");  
  
/* Ø³ÙƒØ±Ø¨Øª Web Worker */  
const workerScript = `  
  const urls = ${JSON.stringify(urls)};  
  const interval = ${intervalSec} * 1000;  
  let timer;  
  
  async function ping(url){  
    const t0 = performance.now();  
    try{  
      await fetch(url,{method:"GET",mode:"no-cors",cache:"no-store"});  
      postMessage({ms:Math.round(performance.now()-t0)});  
    }catch{  
      postMessage({ms:Math.round(performance.now()-t0)});  
    }  
  }  
  
  function checkAll(){  
    postMessage({alive:true});  
    for(const u of urls) ping(u);  
  }  
  
  onmessage = e=>{  
    if(e.data==="start"){  
      checkAll();  
      timer = setInterval(checkAll, interval);  
    }else{  
      clearInterval(timer);  
    }  
  };  
`;  
  
/* ØªØ´ØºÙŠÙ„ */  
function start(){  
  if(running) return;  
  running = true;  
  
  toggleBtn.textContent = "Ø¥ÙŠÙ‚Ø§Ù";  
  toggleBtn.classList.add("active");  
  
  const blob = new Blob([workerScript],{type:"application/javascript"});  
  worker = new Worker(URL.createObjectURL(blob));  
  worker.postMessage("start");  
  
  let lastAlive = Date.now();  
  worker.onmessage = e => {  
    if(e.data.alive){  
      lastAlive = Date.now();  
    }  
  };  
  
  let t = intervalSec;  
  circle.textContent = t;  
  
  timer = setInterval(()=>{  
  
    if(Date.now() - lastAlive > 3000){  
      console.log("âš ï¸ Worker stopped â€” countdown paused");  
      return;  
    }  
  
    t = t>1 ? t-1 : intervalSec;  
    circle.textContent = t;  
  
  },1000);  
}  
  
/* Ø¥ÙŠÙ‚Ø§Ù */  
function stop(){  
  running = false;  
  
  toggleBtn.textContent = "ØªØ´ØºÙŠÙ„";  
  toggleBtn.classList.remove("active");  
  
  if(worker){ worker.postMessage("stop"); worker.terminate(); worker=null; }  
  if(timer){ clearInterval(timer); timer=null; }  
}  
  
toggleBtn.addEventListener("click",()=> running ? stop() : start());  
</script>  
  
<footer>ðŸ’  Ø¯Ø¹Ù…Ùƒ ÙˆÙ†Ø´Ø±Ùƒ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ðŸ’ </footer>  
  
</body>  
</html>
